{% extends 'layout.html' %}

{% block title %}Home{% endblock %}

{% block content %}
<div class="content">
    <h2>Home Page</h2>
    <p class="block">Welcome back, {{ username }}!</p>
    <p>You're currently subscribed to tier {{ tier }}!</p>
    <script>
        // Get the value of 'tier' from the template
        const tier = '{{ tier }}';
        const token = '{{ token}}';
        // Create a new paragraph and link elements
        let pElement = document.createElement('p');
        pElement.classList.add('block');
        let linkElement = document.createElement('a');
        // Use JavaScript to conditionally set the text content based on the 'tier' value
        if (tier == 0) {
            pElement.textContent = 'You are not subscribed, please contact us to upgrade your service\n';
            linkElement.href = 'mailto:smithzachwilliam@gmail.com';
            linkElement.textContent = 'Email';
        } else if (tier == 1) {
            pElement.textContent = 'You have access to Basic Analytics!\n';
            linkElement.href = 'https://paymentsvisualizer-5d34b3024a19.herokuapp.com/?token='+token;
            linkElement.textContent = 'Payment Visualizer';
        } else if (tier == 2) {
            pElement.textContent = 'You have access to Advanced Analytics!\n';
            linkElement.href = 'https://analytics.zoho.com/open-view/2541727000002517434/4a5bc3d86da3f83e0d77dc6373d38be2?token='+token;
            linkElement.textContent = 'Advanced Application';
        } else if (tier == 3) {
            pElement.textContent = 'You have access to Expert Analytics!\n';
            linkElement.href = 'https://analytics.zoho.com/open-view/2541727000002517434/4a5bc3d86da3f83e0d77dc6373d38be2?token='+token;
            linkElement.textContent = 'Expert Application';
        } else {
            pElement.textContent = 'Subscription Error please Contact your Administrator';
        }
        pElement.appendChild(linkElement);
        document.querySelector('.content').appendChild(pElement);
    </script>
</div>
{% endblock %}
